<!DOCTYPE html>
<html lang="ko">
<head>
    <title>Vue3 + PrimeVue Sample</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=0.9, maximum-scale=1.8, minimum-scale=0.9, user-scalable=yes">

    <link href="css/primeicons.css" rel="stylesheet"/>
    <link href="/css/swiper-bundle.min.css" rel="stylesheet"/>
    <link href="css/custom.css" rel="stylesheet"/>
    <link href="css/overlayscrollbars.min.css" rel="stylesheet"/>

    <script src="js/vue.global.js"></script>
    <script src="js/primevue.min.js"></script>
    <script src="js/aura.js"></script>
    <script src="js/tailwindcss.js"></script>
    <script src="/js/swiper-bundle.min.js"></script>
    <script src="/js/overlayscrollbars.browser.es6.min.js"></script>

</head>
<body class="bg-gray-100">
<div id="app">
    <overlay-scrollbars style="max-height: 100vh;">
        <div class="mx-auto p-6 space-y-6" style="max-width: 1035px;">
            <h1 class="text-2xl font-bold text-center">Vue3 + PrimeVue Sample <span class="text-cyan-600">(Accordian)</span></h1>

            <p-toolbar class="justify-between">
                <template #center>
                    <div class="flex flex-wrap gap-2">
                        <a href="sample1.html">
                            <p-button label="Form" size="small" variant="text" severity="primary"/>
                        </a>
                        <a href="sample2.html">
                            <p-button label="Tabs/Swiper/Drawer" size="small" variant="text" severity="secondary"/>
                        </a>
                        <a href="sample8.html">
                            <p-button label="Accordian" size="small" variant="text" severity="success"/>
                        </a>
                        <a href="sample3.html">
                            <p-button label="DataTable" size="small" variant="text" severity="info"/>
                        </a>
                        <a href="sample7.html">
                            <p-button label="Overlays" size="small" variant="text" severity="warn"/>
                        </a>
                        <a href="sample5.html">
                            <p-button label="Button" size="small" variant="text" severity="help"/>
                        </a>
                        <a href="sample4.html">
                            <p-button label="Tree/PickList" size="small" variant="text" severity="danger"/>
                        </a>
                        <a href="sample6.html">
                            <p-button label="Tag/Spinner/Toast" size="small" variant="text" severity="contrast"/>
                        </a>
                    </div>
                </template>
            </p-toolbar>

            <section class="bg-white p-4 rounded shadow">
                <h2 class="text-lg font-semibold mb-2">최초 열린 상태</h2>
                <p-accordion value="0">
                    <p-accordion-panel value="0">
                        <p-accordion-header title="타이틀"></p-accordion-header>
                        <p-accordion-content>컨텐츠</p-accordion-content>
                    </p-accordion-panel>
                </p-accordion>
            </section>

            <section class="bg-white p-4 rounded shadow">
                <h2 class="text-lg font-semibold mb-2">최초 닫힌 상태</h2>
                <p-accordion :value="[]">
                    <p-accordion-panel value="0">
                        <p-accordion-header  title="타이틀"></p-accordion-header>
                        <p-accordion-content>컨텐츠</p-accordion-content>
                    </p-accordion-panel>
                </p-accordion>
            </section>

            <section class="bg-white p-4 rounded shadow">
                <h2 class="text-lg font-semibold mb-2">Disabled</h2>
                <p-accordion :value="[]">
                    <p-accordion-panel value="0" disabled>
                        <p-accordion-header  title="타이틀" icon-class="opacity-55"></p-accordion-header>
                        <p-accordion-content>컨텐츠</p-accordion-content>
                    </p-accordion-panel>
                </p-accordion>
            </section>
        </div>
    </overlay-scrollbars>
</div>

<script>
    const {createApp, ref} = Vue;

    /* ─────────────────────────────────────────────────────────────
       App
    ───────────────────────────────────────────────────────────── */
    const app = createApp({
        setup() {

            return {};
        },
    });

    // PrimeVue 등록
    app.use(PrimeVue.Config, {theme: {preset: PrimeUIX.Themes.Aura}});

    const {Toolbar, Button, Accordion, AccordionPanel, AccordionHeader, AccordionContent} = PrimeVue;

    app.component('p-toolbar', Toolbar);
    app.component('p-button', Button);

    // 래퍼: p-accordion 기본 class="acc-b5" 적용 + header 기본 슬롯 생성
    if (Accordion && AccordionPanel && AccordionHeader && AccordionContent) {
        const h = Vue.h;
        app.component('p-accordion', {
            setup(_, { attrs, slots }) {
                return () => {
                    const userClass = attrs && attrs.class;
                    const mergedClass = [ 'acc-b5', userClass ].filter(Boolean).join(' ');
                    const passAttrs = { ...attrs, class: mergedClass };
                    return h(Accordion, passAttrs, slots);
                };
            }
        });
        app.component('p-accordion-panel', {
            setup(_, { attrs, slots }) { return () => h(AccordionPanel, attrs, slots); }
        });
        app.component('p-accordion-header', {
            props: { title: { type: String, default: '' }, iconClass: { type: String, default: '' } },
            setup(props, { attrs, slots }) {
                return () => {
                    const hasCustom = !!(slots.default && slots.default().length);
                    if (hasCustom) return h(AccordionHeader, attrs, slots);
                    const titleText = props.title || attrs?.title || '';
                    const iconCls = 'pi pi-chevron-down accb5-toggle transition-transform duration-200' + (props.iconClass ? (' ' + props.iconClass) : '');
                    return h(AccordionHeader, attrs, {
                        default: () => [
                            h('span', { class: 'flex-1' }, titleText),
                            h('i', { class: iconCls, 'aria-hidden': 'true' })
                        ]
                    });
                };
            }
        });
        app.component('p-accordion-content', {
            setup(_, { attrs, slots }) { return () => h(AccordionContent, attrs, slots); }
        });
    }

    app.component('overlay-scrollbars', {
        props: ['style', 'class'],
        mounted() {
            window.OverlayScrollbarsGlobal.OverlayScrollbars(this.$el, {scrollbars: {autoHide: 'scroll'}});
        },
        render() {
            return Vue.h('div', {style: this.style, class: this.class}, this.$slots.default());
        }
    });

    app.mount('#app');
</script>
</body>
</html>
